!function(t){t.framework&&t.aid||(t.framework=t.aid={})}(window),!function(t,e){function n(t){var e=t.target;if(e.nodeType)for(;e!==this;e=e.parentNode||this)if(1===e.nodeType&&e.disabled!==!0)for(var n=this.querySelectorAll(o),i=0,r=n.length;r>i;i++)if(n[i]===e){n[i].classList.add(a);break}}function i(t){var e=t.target;if(e.nodeType)for(;e!==this;e=e.parentNode||this)1===e.nodeType&&e.disabled!==!0&&e.classList.remove(a)}var a="activated",o=".clickable";e.addEventListener("touchstart",n,!1),e.addEventListener("touchmove",i,!1),e.addEventListener("touchend",i,!1)}(window,document),!function(t,e){function n(t){t.preventDefault()}var i=t.framework;i.alert={_elem:null,callback:null,getElem:function(){var t=this;if(t._elem)return t._elem;var n=e.createElement("div");n.className="framework-alert framework-backdrop";var i=e.createElement("div");i.className="framework-dialog";var a=e.createElement("div");a.className="framework-dialog-body";var o=e.createElement("p");o.className="framework-dialog-content";var r=e.createElement("div");r.className="framework-dialog-footer";var s=e.createElement("button");return s.className="framework-dialog-button clickable",s.innerText="确定",a.appendChild(o),i.appendChild(a),r.appendChild(s),i.appendChild(r),n.appendChild(i),e.body.appendChild(n),t._elem=n,n},show:function(i,a){if(i){var o=this,r=o.getElem();r.style.display="",r.style.opacity=0;var s=r.querySelector(".framework-dialog-content");s.innerHTML=i;var l=r.querySelector(".framework-dialog-button");l.addEventListener("click",o.hide.bind(o),!1),o.callback=a,t.requestAnimationFrame(function(){r.style.opacity=1}),e.addEventListener("touchmove",n,!1)}},hide:function(i){function a(){var t=o.getElem();t.style.display="none",t.style.opacity=0;var i=t.querySelector(".framework-dialog-button");i.removeEventListener("click",o.hide),"function"==typeof o.callback&&(o.callback(),o.callback=null),e.removeEventListener("touchmove",n,!1)}var o=this;i>0?setTimeout(a,+i):t.requestAnimationFrame(a)}}}(window,document),!function(t,e,n){function i(){a&&(clearTimeout(a),a=null)}if(e&&e.fn){var a,o={SERVER_URL:"",afterAdaptive:n},r=function(t,n){var i=this;return i.$=e(t),i.options=e.extend(!0,{},o,n),i.init(),i};r.prototype={init:function(){var t=this;t.lastestSrc=null,t.$.addClass("img-container"),"undefined"!=typeof t.$.attr("avatar")&&(t.$.addClass("img-avatar"),t.avatar=!0),"undefined"!=typeof t.$.attr("adaptive")&&(t.$.addClass("img-adaptive"),t.adaptive=!0),t.$.attr("img-src")&&(t.src=e.trim(t.$.attr("img-src")),t.load()),e.fn.imgZoomable&&t.$.on("click","img,.img",function(){e(this).imgZoomable()})},isSrcChanged:function(){return this.lastestSrc!==this.src},load:function(){function t(){l=null,c=null}function n(){r.isSrcChanged()&&(r.$.removeClass("img-loading"),r.$.addClass("img-error"),l.remove()),t()}function o(){if(r.isSrcChanged()){if(r.$.removeClass("img-loading"),r.$.addClass("img-loaded"),r.adaptive){var n,i;n={w:r.$.width(),h:r.$.height()},r.$.append(c),l.remove(),i={w:r.$.width(),h:r.$.height()},e.isFunction(r.options.afterAdaptive)&&r.options.afterAdaptive(i,n)}else l.css({"background-image":"url("+s+")",opacity:1});r.lastestSrc=r.src}t()}var r=this,s=r.src;if(i(),!s)return void(a=setTimeout(function(){r.$.removeClass("img-loading img-loaded").addClass("img-error")},5e3));"string"==typeof s&&"/"===s[0]&&(s=r.options.SERVER_URL+s),r.$.html("").removeClass("img-loaded img-error").addClass("img-loading");var l=e("<div />").addClass("img").css("opacity",0).appendTo(r.$),c=document.createElement("img");c.src=s,c.onload=o,c.onerror=n}},e.fn.imgLoader=function(t){var e;return this.each(function(){var n=new r(this,t);e||(e=n)}),e},e.fn.imgLoader.defaults=o}}(window,window.$),!function(t,e,n,i){function a(t){t.preventDefault()}if(e&&e.fn&&n){var o,r={scrollSelector:"body"},s=function(t,n){var i=this;return i.options=e.extend(!0,{},r,n),i.$=e(t),i.$scoller=i.$.parents(i.options.scrollSelector),o||(o=e("<div />").addClass("img-zoomable-backdrop").appendTo("body")),i.init(),i};s.prototype={init:function(){var i=this;i.$scoller.addClass("modal-open"),i.$scoller.on("touchmove",a),o.html("").css({display:"block","background-color":"transparent"});var r=e("<div />").appendTo(o),s=e("<img />").appendTo(r),l={width:i.$.width(),height:i.$.height(),top:i.$.offset().top-i.$scoller.scrollTop(),left:i.$.offset().left-i.$scoller.scrollLeft()};s.attr("src",i.getSrc()).css(l),t.requestAnimationFrame(function(){var t=o.width()/l.width,e=o.height()/l.height,a=Math.min(t,e);o.transition(500).css("background-color",""),s.transition(500).css({width:l.width*a,height:l.height*a,top:(o.height()-l.height*a)/2,left:(o.width()-l.width*a)/2}).transitionEnd(function(){new n(r)}),o.on("click",function(){i.$scoller.removeClass("modal-open"),i.$scoller.off("touchmove"),o.css("background-color","transparent"),s.css(l).transitionEnd(function(){o.css({display:"none","background-color":""}).html("")})})})},getSrc:function(){var t=this;return t.$.is("img")?t.$.attr("src"):/url\(.*\)/.test(t.$.css("backgroundImage"))?t.$.css("backgroundImage").replace(/url\((.*)\)/,"$1"):""}},e.fn.imgZoomable=function(t){var e;return this.each(function(){var n=new s(this,t);e||(e=n)}),e},e.fn.imgZoomable.defaults=r}}(window,window.$,window.RTP&&window.RTP.PinchZoom),!function(t,e,n){if(e&&e.fn){var i={maxLength:120,local:!1},a=function(t,n){var a=this;return a.$=e(t),a.$parent=a.$.parent().addClass("input-with-counter"),a.$counter=e('<span class="input-counter"></span>').appendTo(a.$parent),a.options=e.extend(!0,{},i,n),a.childrenLength=a.$.children().length,a.prevIndex=a.options.initialIndex,a.currIndex=a.options.initialIndex,a.init=function(t){a.$counter.css({bottom:a.$parent.css("paddingBottom"),right:a.$parent.css("paddingRight")}),a.calcCounter(),a.calcMaxLength(),a._bindChange()},a.calcCounter=function(){a.$counter.text(a.getLength()+"/"+a.options.maxLength)},a._bindChange=function(){var t;a.$.on("keydown, keyup",function(e){t&&clearTimeout(t),t=setTimeout(function(){a.calcCounter(),a.calcMaxLength()},300)})},a.calcCounter=function(){var t;a.options.local?(t=a.getStrLocalLength(a.$.val()),t=Math.ceil(t/2)):t=a.$.val().length,a.$counter.text(t+"/"+a.options.maxLength)},a.calcMaxLength=function(){var t=a.options.maxLength,e=a.$.val();if(a.options.local){var n=a.getStrLocalLength(e);t=2*t-Math.min(n-e.length,t),a.$.attr("maxlength",t)}else parseInt(a.$.attr("maxlength"))!==t&&a.$.attr("maxlength",t);e.length>t&&(a.$.val(e.slice(0,t)),a.calcCounter())},a.init(),a};a.prototype={getStrLocalLength:function(t){if(!t)return 0;for(var e=0,n=0,i=t.length;i>n;n++)/^[\u4e00-\u9fa5]+$/.test(t.charAt(n))?e+=2:e++;return e}},e.fn.inputWithCounter=function(t){var e;return this.each(function(){var n=new a(this,t);e||(e=n)}),e},e.fn.inputWithCounter.defaults=i}}(window,window.$),!function(t,e,n,i){function a(t){var i=this;if(e.isArray(i.data)){i.pagination&&i.pagination.total++,i.data.push(t);var a=n(i.template,{data:[t],extra:i.extra});i.$.append(a),i.scrollToBottom(300),i.afterRender()}}function o(){function t(){o.loading=!1}function i(t){if(o.isValidResult(t))if(o.pagination)if(0===o.pagination.offset){var i={};e.each(t,function(t,e){-1===["total","lastupdatetime","list"].indexOf(t)&&(i[t]=e)}),o.extra=i,o.data=o.opposite?t.list.reverse():t.list,o.pagination.total=t.total,o.lastupdatetime=t.lastupdatetime,o.hasMoreData=o.pagination.total>o.data.length,o.render()}else{var a=o.opposite?t.list.reverse():t.list,r=n(o.template,{data:a,extra:o.extra});if(o.opposite){var s=o.$.height(),l=o.$scoller.scrollTop();o.data=a.concat(o.data),o.$.prepend(r),o.scrollTo(l+(o.$.height()-s))}else o.data=(e.isArray(o.data)?o.data:[]).concat(a),o.$.append(r);o.pagination.total=t.total,o.hasMoreData=t.list.length>0&&o.pagination.total>o.data.length,o.afterRender()}else o.data=t,o.render()}function a(t){o.error=t}var o=this;o.error=null,o.loading=!0;var r;o.pagination&&(r={offset:o.pagination.offset,limit:o.pagination.limit,page:o.pagination.page},o.pagination.offset>0&&o.lastupdatetime&&(r.lastupdatetime=o.lastupdatetime));var s=o.getPromise(r);return s.then(i,a).always(t),s}function r(){var t,n=this;return e.isFunction(n.getRealtimePromise)&&(t=n.getRealtimePromise()),t&&t.then?(t.always(function(){n.loadFromServerRealtime()}),t.then(function(t){n.addItem(t)}),t):e.Deferred().reject()}function s(){var t=this;return t.loading||!t.pagination?e.Deferred().resolve():(t.pagination.offset+=t.pagination.limit,t.pagination.page++,t.loadFromServer())}function l(){var n=this;n.pagination&&e(t).on("scroll",function(){n.hasMoreData&&!n.isSafePosition()&&n.loadMore()})}function c(){var t=this;return e.isArray(t.data)?!t.data.length:!t.data}function d(){var e=this,n=e.$.outerHeight()+e.$.offset().top-t.innerHeight,i=e.$scoller.scrollTop(),a=-1!==e.distance.indexOf("%"),o=(a?n*parseFloat(e.distance)/100:parseFloat(e.distance),e.opposite?i:n-i);return a?o/n>parseFloat(e.distance)/100:o>parseFloat(e.distance)}function u(t){var n=this;return n.pagination?t&&e.isArray(t.list):!0}function f(){var t=this;return t.loading?e.Deferred().resolve():(t.pagination&&(t.pagination.offset=0,t.pagination.page=1),t.loadFromServer())}function p(t){var n=this,i=e.isArray(n.data)?n.data.indexOf(t):-1;i>-1&&(n.data.splice(i,1),n.pagination&&n.pagination.total--,n.$.children().eq(i).remove())}function h(){var t=this,i={data:t.data,extra:t.extra,$init:!0},a=n(t.template,i);t.$.html(a),e.isFunction(t.afterRender)&&t.afterRender(),t.opposite&&t.scrollToBottom()}function m(t,e){this.scrollTo(this.$scoller.scrollTop()+t,e)}function g(t,e){e>0?this.$scoller.animate({scrollTop:t},e):this.$scoller.scrollTop(t)}function v(e){var n=this,i=n.$.outerHeight()+n.$.offset().top-t.innerHeight;this.scrollTo(i,e)}function w(t){this.scrollTo(0,t)}if(e&&e.fn&&n){var $={data:null,extra:null,loading:!1,error:null,pagination:{offset:0,limit:10,total:0,page:1},opposite:!1,lastupdatetime:"",scrollSelector:"body",distance:"2.5%",template:null,getPromise:null,getRealtimePromise:null},y=function(t,n){var i=this;e.extend(i,$,n),i.$=e(t),i.$scoller=i.scrollSelector?e(i.scrollSelector):i.$.parent(),i.init()};y.prototype={addItem:a,loadFromServer:o,loadFromServerRealtime:r,loadMore:s,init:l,isNoData:c,isValidResult:u,isSafePosition:d,refresh:f,removeItem:p,render:h,scroll:m,scrollTo:g,scrollToBottom:v,scrollToTop:w},e.fn.list=function(t){var e;return this.each(function(){var n=new y(this,t);e||(e=n)}),e},e.fn.list.defaults=$}}(window,window.$,window.template),!function(t,e,n){if(e&&e.fn){var i={headerSelector:".tab-switchs-header",contentSelector:".tab-switchs-content",positionClass:"tab-switchs-position",initialIndex:location.hash.match(/tab\d/)?parseInt(location.hash.match(/tab(\d)/)[1]):0,duration:500,onChange:n,afterInit:n},a=function(n,a){var o=this;return o.$=e(n),o.options=e.extend(!0,{},i,a),o.$header=o.$.find(o.options.headerSelector),o.$position=e("<div >").addClass(o.options.positionClass).insertAfter(o.$header),o.$content=o.$.find(o.options.contentSelector),o.tabsLength=o.$header.children().length,o.prevIndex=o.options.initialIndex,o.currIndex=o.options.initialIndex,o.init=function(n){o.$header.on("click","button",function(n){var i=e(this).parent().index();o.switchTo(i),history.replaceState&&history.replaceState(null,t.title,location.href.split("#")[0]+"#tab"+i)}),o.$position.width(100/o.tabsLength+"%"),o.$content.width(100*o.tabsLength+"%"),o.$content.children().width(100/o.tabsLength+"%"),o.updateHeader(),o.updatePosition(),o.updateContent(),e.isFunction(o.options.afterInit)&&o.options.afterInit.call(o)},o.switchTo=function(t){t!==o.currIndex&&(o.prevIndex=o.currIndex,o.currIndex=t,o.updateHeader(o.options.duration),o.updatePosition(o.options.duration),o.updateContent(o.options.duration),e.isFunction(o.options.onChange)&&o.options.onChange.call(o,o.currIndex))},o.updateHeader=function(){var t=o.$header.children();t.eq(o.prevIndex).removeClass("active"),t.eq(o.currIndex).addClass("active")},o.updatePosition=function(t){var e={marginLeft:100*o.currIndex/o.tabsLength+"%"};o.$position.transition(t).css(e)},o.updateContent=function(t){o.$content.transition(t).css({marginLeft:-100*o.currIndex+"%"}),o.$content.children().transition(t).each(function(n){var i=e(this);n===o.currIndex?(i.css({opacity:1}),i.children().css("display","")):t>0?i.css({opacity:0}).transitionEnd(function(){"0"===i.css("opacity")&&i.children().css("display","none")}):i.css({opacity:0})})},o.init(),o};e.fn.tabSwitchs=function(t){var e;return this.each(function(){var n=new a(this,t);e||(e=n)}),e},e.fn.tabSwitchs.defaults=i}}(window,window.$),!function(t,e){e&&e.fn&&("transform"in e.fn||(e.fn.transform=function(t){for(var e=0,n=this.length;n>e;e++){var i=this[e].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t}return this}),"transition"in e.fn||(e.fn.transition=function(t){"string"!=typeof t&&(t+="ms");for(var e=0,n=this.length;n>e;e++){var i=this[e].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t}return this}),"transitionEnd"in e.fn||(e.fn.transitionEnd=function(t){function e(r){if(r.target===this)for(t.call(this,r),n=0,i=o.length;i>n;n++)a.off(o[n],e)}var n,i,a=this,o=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];if("function"==typeof t)for(n=0,i=o.length;i>n;n++)a.on(o[n],e);return this}))}(window,window.$),!function(t,e){function n(t){t.preventDefault()}var i=t.framework;i.loading={_elem:null,getElem:function(){var t=this;if(t._elem)return t._elem;var n=e.createElement("div");n.className="framework-loading framework-backdrop";var i=e.createElement("div");return i.className="framework-spinning",n.appendChild(i),e.body.appendChild(n),t._elem=n,n},show:function(){var i=this,a=i.getElem();a.style.display="",a.style.opacity=0,t.requestAnimationFrame(function(){a.style.opacity=1}),e.addEventListener("touchmove",n,!1)},hide:function(i){function a(){var t=o.getElem();t.style.display="none",t.style.opacity=0,e.removeEventListener("touchmove",n,!1)}var o=this;i>0?setTimeout(a,+i):t.requestAnimationFrame(a)}}}(window,document),!function(t,e){function n(t){"undefined"==typeof r[a(t)]&&e.querySelector("html").classList.add("no-"+t)}function i(){r=e.createElement("div").style,s.forEach(n),r=null,e.removeEventListener("DOMContentLoaded",i)}function a(t){return t.split("-").map(function(t,e){return e?t.slice(0,1).toUpperCase()+t.slice(1):t}).join("")}var o=t.framework;t.requestAnimationFrame||(t.requestAnimationFrame=function(e){t.setTimeout(e,0)});var r,s=["flex-wrap"];o.checkStyle=n,e.addEventListener("DOMContentLoaded",i,!1)}(window,document),!function(t,e){function n(){var a=e.body,o=i(),r=!!o.inapp;if(r?t.sessionStorage.setItem("IN_APP",r):r=!!t.sessionStorage.getItem("IN_APP"),r){a.classList.add("platform-inapp");var s=o._width,l=o._height;if(s>0&&l>0?(t.sessionStorage.setItem("APP_INNER_WIDTH",s),t.sessionStorage.setItem("APP_INNER_HEIGHT",l)):(s=t.sessionStorage.getItem("APP_INNER_WIDTH"),l=t.sessionStorage.getItem("APP_INNER_HEIGHT")),s>0||l>0){var c=e.createElement("div");for(s>0&&(c.style.width=s+"px",c.style.overflowX="hidden"),l>0&&(c.style.height=l+"px",c.style.overflowY="scroll");a.firstChild;)c.appendChild(a.firstChild);a.appendChild(c)}}else a.classList.add("platform-browser");e.removeEventListener("DOMContentLoaded",n)}function i(){var e,n={},i=t.location.search.replace(/^\?/,"").split("&");return i.forEach(function(t,i){if(t){e=t.split("=");try{n[e[0]]=decodeURIComponent(e[1])}catch(a){n[e[0]]=e[1]}}}),n}e.addEventListener("DOMContentLoaded",n,!1)}(window,document),!function(t,e){var n=t.framework;n.tip={_elem:null,getElem:function(){var t=this;if(t._elem)return t._elem;var n=e.createElement("div");n.className="framework-tip framework-backdrop";var i=e.createElement("p");return i.className="framework-toast",n.appendChild(i),e.body.appendChild(n),t._elem=n,n},show:function(t,e,n){if(t){"function"==typeof e&&(n=e,e=null);var i=this,a=i.getElem();a.style.opacity=0,a.style.display="";var o=a.querySelector("p");o.innerHTML=t,i.callback=n,requestAnimationFrame(function(){a.style.opacity=1,i.hide(e||1500)}),a.addEventListener("touchstart",i.hide.bind(i),!1)}},hide:function(t){function e(){var t=n.getElem();t.style.display="none",t.style.opacity=0,"function"==typeof n.callback&&(n.callback(),n.callback=null),t.removeEventListener("touchmove",n.hide,!1)}var n=this;t>0?setTimeout(e,+t):requestAnimationFrame(e)}}}(window,document);